<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>처음 만나는 Composition API | ChangJoo Park&#39;s Write</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/write/assets/css/0.styles.c3a3c9ce.css" as="style"><link rel="preload" href="/write/assets/js/app.88076934.js" as="script"><link rel="preload" href="/write/assets/js/2.62d75d41.js" as="script"><link rel="preload" href="/write/assets/js/26.ca9a2e28.js" as="script"><link rel="prefetch" href="/write/assets/js/10.233b49c4.js"><link rel="prefetch" href="/write/assets/js/11.49ce2064.js"><link rel="prefetch" href="/write/assets/js/12.e6b6a916.js"><link rel="prefetch" href="/write/assets/js/13.33bec535.js"><link rel="prefetch" href="/write/assets/js/14.f67c9dbb.js"><link rel="prefetch" href="/write/assets/js/15.eab5b590.js"><link rel="prefetch" href="/write/assets/js/16.2e0e0242.js"><link rel="prefetch" href="/write/assets/js/17.778ed87a.js"><link rel="prefetch" href="/write/assets/js/18.50762327.js"><link rel="prefetch" href="/write/assets/js/19.a4fee796.js"><link rel="prefetch" href="/write/assets/js/20.280c1dc4.js"><link rel="prefetch" href="/write/assets/js/21.dffd91a4.js"><link rel="prefetch" href="/write/assets/js/22.34715d61.js"><link rel="prefetch" href="/write/assets/js/23.1132ce43.js"><link rel="prefetch" href="/write/assets/js/24.4251af93.js"><link rel="prefetch" href="/write/assets/js/25.a03a3d4f.js"><link rel="prefetch" href="/write/assets/js/27.fd0e6a79.js"><link rel="prefetch" href="/write/assets/js/28.064f18b6.js"><link rel="prefetch" href="/write/assets/js/29.ba6eb953.js"><link rel="prefetch" href="/write/assets/js/3.ee451ee8.js"><link rel="prefetch" href="/write/assets/js/30.7f5a92a6.js"><link rel="prefetch" href="/write/assets/js/31.d9920ec4.js"><link rel="prefetch" href="/write/assets/js/32.4d0eeb72.js"><link rel="prefetch" href="/write/assets/js/33.6ea00d29.js"><link rel="prefetch" href="/write/assets/js/34.ffeb8668.js"><link rel="prefetch" href="/write/assets/js/4.ca167eb3.js"><link rel="prefetch" href="/write/assets/js/5.c895731a.js"><link rel="prefetch" href="/write/assets/js/6.f93936eb.js"><link rel="prefetch" href="/write/assets/js/7.e9c1f144.js"><link rel="prefetch" href="/write/assets/js/8.bd035fcc.js"><link rel="prefetch" href="/write/assets/js/9.00082ab0.js">
    <link rel="stylesheet" href="/write/assets/css/0.styles.c3a3c9ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/write/" class="home-link router-link-active"><!----> <span class="site-name">ChangJoo Park's Write</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/write/guide/" class="nav-link router-link-active">
  가이드
</a></div><div class="nav-item"><a href="https://github.com/changjoo-park/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://medium.com/@changjoopark/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/write/guide/" class="nav-link router-link-active">
  가이드
</a></div><div class="nav-item"><a href="https://github.com/changjoo-park/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://medium.com/@changjoopark/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue.js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/write/guide/vue/" aria-current="page" class="sidebar-link">소개</a></li><li><a href="/write/guide/vue/composition-api.html" aria-current="page" class="active sidebar-link">처음 만나는 Composition API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/write/guide/vue/composition-api.html#composition-api" class="sidebar-link">Composition API</a></li><li class="sidebar-sub-header"><a href="/write/guide/vue/composition-api.html#setup" class="sidebar-link">setup</a></li><li class="sidebar-sub-header"><a href="/write/guide/vue/composition-api.html#setup을-이용한-컴포넌트-구성" class="sidebar-link">setup을 이용한 컴포넌트 구성</a></li><li class="sidebar-sub-header"><a href="/write/guide/vue/composition-api.html#mixin의-한계를-composition-api로-해결하기" class="sidebar-link">Mixin의 한계를 Composition API로 해결하기</a></li></ul></li><li><a href="/write/guide/vue/difference-between-ref-and-reactive.html" class="sidebar-link">ref 와 reactive는 어떻게 다른가</a></li><li><a href="/write/guide/vue/performance-ref-reactive.html" class="sidebar-link">ref 와 reactive의 성능차이</a></li><li><a href="/write/guide/vue/watch-watch-effect.html" class="sidebar-link">watch와 watchEffect의 차이</a></li><li><a href="/write/guide/vue/debugging-vue.html" class="sidebar-link">Vue 앱 디버깅</a></li><li><a href="/write/guide/vue/devtools.html" class="sidebar-link">Vue.js 3 개발자도구 (devtools)</a></li><li><a href="/write/guide/vue/composition-api-to-three.html" class="sidebar-link">Composition API 에서 Vue 3</a></li><li><a href="/write/guide/vue/prototype-to-global-properties.html" class="sidebar-link">글로벌 속성 주입 방식 변경</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nuxt</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Deno</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Flutter</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="처음-만나는-composition-api"><a href="#처음-만나는-composition-api" class="header-anchor">#</a> 처음 만나는 Composition API</h1> <p>이 문서는 계속 업데이트 되는 내용이 있습니다.</p> <h2 id="composition-api"><a href="#composition-api" class="header-anchor">#</a> Composition API</h2> <p>Composition API 는 Vue.js 2 후반, Vue.js 3 초반에 나온 함수 기반 컴포넌트 스크립트 작성 방법입니다.
여러 함수들을 조합하여 사용할 수 있습니다.</p> <p>Composition API 를 사용하는 경우 Vue.js 2의 스크립트 구성 방법을 그대로 사용할 수 없습니다. Vue.js 2 스타일로 컴포넌트를 만드려면 <a href="https://v3.vuejs.org/api/global-api.html#definecomponent" target="_blank" rel="noopener noreferrer">defineComponent<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 를 살펴보세요.
defineComponent는 지금 다루지 않을 예정입니다. 단, TypeScript 를 사용하시는 경우 defineComponent가 Vue.js 3 개발에 도움을 줄 수 있습니다.</p> <h2 id="setup"><a href="#setup" class="header-anchor">#</a> setup</h2> <p>Composition API 는 <code>setup</code> 메소드를 이해하는 것으로 시작할 수 있습니다. 기존 Vue.js 2 방식의 <code>&lt;script&gt;</code> 태그는 아래와 같이 구성합니다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// ... 기타</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Composition API 는 <code>setup</code> 메소드를 정의합니다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 컴포넌트 템플릿에서 사용할 데이터, 메소드를 리턴합니다</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Vue.js 3 는 실험적으로 아래와 같이 선언할 수 있습니다. <code>return</code> 대신 <code>export const</code> 를 이용합니다</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ count }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

  <span class="token keyword">export</span> <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">inc</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token punctuation">.</span>value<span class="token operator">++</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>자세한 내용은 <a href="https://github.com/vuejs/rfcs/blob/sfc-improvements/active-rfcs/0000-sfc-script-setup.md" target="_blank" rel="noopener noreferrer">RFC<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>를 확인하세요</p> <h2 id="setup을-이용한-컴포넌트-구성"><a href="#setup을-이용한-컴포넌트-구성" class="header-anchor">#</a> setup을 이용한 컴포넌트 구성</h2> <p>이번에는 Composition API 를 이용한 함수 조합 또는 합성 대신, Vue.js 2에서 Composition API를 이용한 <code>setup</code>은 어떻게 사용해야하는지 알아봅니다</p> <h3 id="this는-어디에"><a href="#this는-어디에" class="header-anchor">#</a> this는 어디에</h3> <p>Composition API는 <code>this</code>가 <code>undefined</code> 입니다. Vue.js 2 초기에 가장 많이 질문이 있었던 부분은 일반 함수 <code>function()</code> 과 arrow-function <code>() =&gt; {}</code> 에서 this가 가리키는 것이 서로 달랐던 문제였습니다. setup 메소드에서는 아예 사용하지 않습니다. 대신 <code>getCurrentInstance</code> 메소드를 이용합니다</p> <blockquote><p>주의하세요💥 :  getCurrentInstance 는 현재 Composition API 와 공식 Vue.js 3 문서에 기술되어있지 않습니다.
나중에 변경될 가능성이 있습니다.</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getCurrentInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 현재 컴포넌트의 Vue 인스턴스를 사용하려면 this 대신 `getCurrentInstance` 를 사용하세요</span>
    <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이 예제에서는 <code>getCurrentInstance</code> 메소드를 setup의 최상단에 사용했으나, 실제 사용하는 경우에는 사용하는 메소드 안에서 사용해도 됩니다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted<span class="token punctuation">,</span> getCurrentInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>이처럼 onMounted 라이프사이클 훅에서 현재 인스턴스가 필요하면 <code>getCurrentInstance</code> 를 이용할 수 있습니다.</p> <p>다른 라이프사이클 훅 목록은 <a href="https://v3.vuejs.org/api/options-lifecycle-hooks.html#beforecreate" target="_blank" rel="noopener noreferrer">공식문서<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 를 확인하세요</p> <h3 id="컴포넌트-데이터와-메소드-사용하기"><a href="#컴포넌트-데이터와-메소드-사용하기" class="header-anchor">#</a> 컴포넌트 데이터와 메소드 사용하기</h3> <p><code>setup</code> 메소드의 리턴 결과는 싱글 파일 컴포넌트(SFC) 중 <code>&lt;template&gt;</code> 안에서 언제든지 접근할 수 있습니다. 단순한 Hello World 를 보여주는 예제입니다.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">'Hello World'</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> message <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>Hello World</code> 를 잘 보여줍니다. 그러면 데이터 <code>message</code> 는 메소드로 뒤집을 수 있을까요?</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reverse<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>뒤집기<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">'Hello World'</span>
    <span class="token keyword">const</span> <span class="token function-variable function">reverse</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> message<span class="token punctuation">,</span> reverse <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>&quot;뒤집기&quot; 버튼을 누르면 Vue.js 2.0 처럼 자동으로 데이터 변경을 감지하고 변경된 결과를 템플릿에 보여줄 것 같지만 전혀 작동하지 않습니다.
<code>@click</code> 이벤트가 실행되지 않은건 아닙니다. 항상 <code>reverse</code> 에서 사용되는 message는 &quot;Hello World&quot; 입니다.</p> <p><code>this</code>가 없으니 <code>vm</code>을 사용하면 되지 않을까? 라고 생각하고 다음과 같이 변경해봅니다</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reverse<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>뒤집기<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> getCurrentInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">'Hello World'</span>
    <span class="token keyword">const</span> <span class="token function-variable function">reverse</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// null을 리턴합니다</span>
      vm<span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> message<span class="token punctuation">,</span> reverse <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>만약 <code>const vm = getCurrentInstance()</code> 이 코드가 <code>setup</code>의  최상위에 있으면 <code>reverse</code> 메소드에서 <code>vm</code> 에 접근할 수 있습니다.
하지만 역시 message에 접근해서 내용을 바꾸는 것은 불가능합니다.
Vue.js 3.0 Composition API는 Reactivity를 완전히 바꾸어놓았습니다.
우선은 데이터와 메소드를 <code>setup</code> 메소드에서 리턴할 수 있는 것 까지 확인하고 &quot;반응성&quot;을 가지는 데이터를 만드는 것은 <a href="difference-between-ref-and-reactive">ref와 reactive는 어떻게 다른가</a>에서 살펴봅니다.</p> <h2 id="mixin의-한계를-composition-api로-해결하기"><a href="#mixin의-한계를-composition-api로-해결하기" class="header-anchor">#</a> Mixin의 한계를 Composition API로 해결하기</h2> <p>Mixin은 동일한 기능을 여러 다른 컴포넌트에서 사용하는 경우에 사용합니다. Mixin은 간단하게 컴포넌트들에 필요한 것들을 외부로 꺼내어 관리할 수 있게 도와주는 도구입니다.
단, Vue.js 2의 Mixin은 다음의 한계를 가지고 있습니다</p> <ul><li>여러 Mixin이 같은 data 이름이나 method 이름을 사용하는 경우 충돌을 방지할 수 없습니다</li> <li>Mixin 사이에 연관관계를 만들 수 없습니다. A Mixin이 B Mixin에 영향을 주거나 받는 경우 명확하게 우선순위를 지정할 수 없습니다</li></ul> <p>이를 해소하기 위해 <code>Mixin factory</code> 기법이나 <code>Scoped Slots</code> 을 사용할 수 있습니다. 그러나 과도하게 추가 설정이 들어가기 때문에 불필요하게 구성하는 시간이 소요됩니다
길어진 코드는 관리할 것이 많다는 것을 의미하기도 합니다.</p> <h3 id="composition-api-의-해결방법"><a href="#composition-api-의-해결방법" class="header-anchor">#</a> Composition API 의 해결방법</h3> <p>Composition API는 필요한 함수를 필요한 시점에 <code>import</code> 해서 사용합니다. 때문에 필요한 경우에 여러 Mixin을 사용하더라도 함수 내부에 감싸져 있기 때문에 충돌의 염려가 없습니다. 그리고 여러 함수를 사용하는 경우에도 코드를 작성하는 시점에 원하는 순서나 조합으로 함수를 배치하여 명확한 연관관계를 설정할 수 있습니다.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/write/guide/vue/" class="prev router-link-active">
        소개
      </a></span> <span class="next"><a href="/write/guide/vue/difference-between-ref-and-reactive.html">
        ref 와 reactive는 어떻게 다른가
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/write/assets/js/app.88076934.js" defer></script><script src="/write/assets/js/2.62d75d41.js" defer></script><script src="/write/assets/js/26.ca9a2e28.js" defer></script>
  </body>
</html>
